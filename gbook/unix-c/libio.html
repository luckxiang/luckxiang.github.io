<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<title>标准IO库 | 《UNIX环境高级编程》学习笔记</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="" name="description"/>
<meta content="GitBook 2.6.7" name="generator"/>
<meta content="true" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black" name="apple-mobile-web-app-status-bar-style"/>
<link href="gitbook/images/apple-touch-icon-precomposed-152.png" rel="apple-touch-icon-precomposed" sizes="152x152"/>
<link href="gitbook/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="gitbook/style.css" rel="stylesheet"/>
<link href="gitbook/plugins/gitbook-plugin-highlight/website.css" rel="stylesheet"/>
<link href="gitbook/plugins/gitbook-plugin-search/search.css" rel="stylesheet"/>
<link href="gitbook/plugins/gitbook-plugin-fontsettings/website.css" rel="stylesheet"/>
<link href="./filestat.html" rel="prev"/>
</head>
<body>
<div class="book" data-basepath="." data-chapter-title="标准IO库" data-filepath="libio.md" data-innerlanguage="" data-level="5" data-revision="Tue Jun 21 2016 00:21:41 GMT+0800 (CST)">
<div class="book-summary">
<nav role="navigation">
<ul class="summary">
<li class="chapter " data-level="0" data-path="index.html">
<a href="./index.html">
<i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
</li>
<li class="chapter " data-level="1" data-path="unixbase.html">
<a href="./unixbase.html">
<i class="fa fa-check"></i>
<b>1.</b>
                        
                        UNIX 基础
                    </a>
</li>
<li class="chapter " data-level="2" data-path="unixstandard.html">
<a href="./unixstandard.html">
<i class="fa fa-check"></i>
<b>2.</b>
                        
                        UNIX标准及其实现
                    </a>
</li>
<li class="chapter " data-level="3" data-path="fileio.html">
<a href="./fileio.html">
<i class="fa fa-check"></i>
<b>3.</b>
                        
                        文件IO
                    </a>
</li>
<li class="chapter " data-level="4" data-path="filestat.html">
<a href="./filestat.html">
<i class="fa fa-check"></i>
<b>4.</b>
                        
                        文件属性
                    </a>
</li>
<li class="chapter active" data-level="5" data-path="libio.html">
<a href="./libio.html">
<i class="fa fa-check"></i>
<b>5.</b>
                        
                        标准IO库
                    </a>
</li>
<li class="divider"></li>
<li>
<a class="homepage-back" href="http://www.bigxiangbaobao.com/book/" target="_self">
                        Back to Book</a>
</li>
</ul>
</nav>
</div>
<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">
<!-- Actions Left -->
<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="./">《UNIX环境高级编程》学习笔记</a>
</h1>
</div>
<div class="page-wrapper" role="main" tabindex="-1">
<div class="page-inner">
<section class="normal" id="section-">
<h1 id="标准io库">标准IO库</h1>
<hr/>
<p>标准IO库就是常说的C库，这个库由ISO C标准说明，标准IO库处理很多细节，如分配缓冲区，以优化的块长度执行IO等，标准IO库几十年没有大的改变了，实现很好。</p>
<h4 id="流和file对象">流和FILE对象</h4>
<p>文件IO的所有IO函数都是围绕着文件描述符来的，打开一个文件的时候获得一个文件描述符，该描述符标记了这个文件。而标准IO库，则是围绕着流进行，当用标准IO打开或者创建一个文件的时候，我们就把一个流和一个文件相关联。对于ASCII字符集，一个字符用一个字节表示，对于国际字符集，一个字符可以用多个字节表示，即宽字符集。流的定向决定了读写的字符是字节流还是多字节流，创建一个流的时候并没有定向。若在未定向的流上使用单字节函数，则是字节定向，使用多字节函数，则是宽字节定向。只有两个函数可以改变流的定向，freopen和fwide</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;wchar.h&gt;

int fwide(FILE *fp, int mode);
//宽定向返回正值，字节定向返回负值，未定向返回0
</code></pre><p>fwide并不改变已经定向的流，而且也无出错返回。
当打开一个流时，我们打开了一个FILE对象，指向FILE对象的指针被叫做文件指针。FILE对象包含了管理该流所需要的所有信息，如实际IO的文件描述符，指向缓冲区的指针，缓冲区的长度，当前在缓冲区的字符数以及出错标志等。</p>
<h4 id="标准输入，标准输出，标准错误输出">标准输入，标准输出，标准错误输出</h4>
<p>对于一个进程来说，打开的时候和三个流自动绑定，就是标准输入，标准输出，标准错误输出。可以通过<code>stdin</code>,<code>stdout</code>,<code>stderr</code>引用。他们和文件IO的，<code>STDIN_FILENO</code>,<code>STDOUT_FILENO</code>,<code>STDERR_FILENO</code>对应。</p>
</section>
</div>
</div>
</div>
<a aria-label="Previous page: 文件属性" class="navigation navigation-prev navigation-unique" href="./filestat.html"><i class="fa fa-angle-left"></i></a>
</div>
</div>
<script src="gitbook/app.js"></script>
<script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
<script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
<script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
<script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>
</body>
</html>
